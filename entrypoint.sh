#!/bin/bash
set -e

echo "üì• –ü—Ä–æ–≤–µ—Ä–∫–∞ TF-IDF –∫–æ—Ä–ø—É—Å–∞..."
if [ ! -f "./tfidf_data/tfidf_metadata.json" ]; then
  echo "üì¶ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ—Ä–ø—É—Å–∞..."
  python extract_corpus.py

  echo "üìä –û–±—É—á–µ–Ω–∏–µ TF-IDF..."
  python train_tfidf.py

  echo "‚úÖ TF-IDF –æ–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
else
  echo "‚úÖ TF-IDF —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ."
fi

echo "üì• –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏..."
python preload_models.py || echo "‚ö†Ô∏è –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ"


echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
exec "$@"


